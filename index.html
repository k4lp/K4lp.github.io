<!DOCTYPE html>
<html lang="en" data-theme="dark">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>Gemini Deep Research System</title>
  
  <!-- FONT STACK (Geist / Geist Mono first, fallbacks next) -->
  <style>
    :root {
      --bg-app: #0a0a0a;
      --bg-panel: #111111;
      --bg-alt: #1a1a1a;
      --border-color: #2a2a2a;
      --border-color-soft: #1f1f1f;
      --text-primary: #fafafa;
      --text-dim: #8a8a8a;
      --text-extra-dim: #555555;
      --radius-lg: 12px;
      --radius-md: 8px;
      --radius-sm: 6px;
      --pad-lg: 16px;
      --pad-md: 12px;
      --pad-sm: 8px;
      --font-sans: "Geist","Inter","system-ui",-apple-system,BlinkMacSystemFont,"Segoe UI",Roboto,"Helvetica Neue",Arial,sans-serif;
      --font-mono: "Geist Mono","ui-monospace","SFMono-Regular",Menlo,Consolas,monospace;
      --panel-shadow: 0 20px 60px rgba(0,0,0,0.8);
    }

    * { box-sizing: border-box; -webkit-font-smoothing: antialiased; text-rendering: optimizeLegibility; }
    body { margin: 0; background-color: var(--bg-app); color: var(--text-primary); font-family: var(--font-sans); line-height: 1.4; display: grid; grid-template-rows: auto 1fr; min-height: 100vh; }
    header.app-header { border-bottom: 1px solid var(--border-color); background-color: var(--bg-panel); padding: 12px 16px; display: flex; align-items: flex-start; justify-content: space-between; box-shadow: var(--panel-shadow); position: relative; z-index: 100; }
    .app-header__left { display: flex; flex-direction: column; min-width: 0; }
    .app-title { font-size: 12px; font-weight: 600; letter-spacing: -0.04em; color: var(--text-primary); line-height: 1.2; display: flex; align-items: baseline; gap: 8px; flex-wrap: wrap; }
    .app-title__label { font-family: var(--font-mono); background-color: var(--bg-alt); border: 1px solid var(--border-color); border-radius: var(--radius-sm); padding: 3px 6px; font-size: 10px; line-height: 1.1; font-weight: 500; color: var(--text-dim); }
    .app-subline { font-size: 11px; font-weight: 400; color: var(--text-dim); margin-top: 4px; max-width: 600px; letter-spacing: -0.03em; line-height: 1.3; }
    .app-header__right { display: flex; flex-wrap: wrap; gap: 12px 16px; align-items: flex-start; justify-content: flex-end; min-width: 0; }
    .runtime-block { display: flex; flex-direction: column; gap: 6px; min-width: 160px; }
    .runtime-block__label { font-size: 10px; color: var(--text-dim); font-weight: 500; text-transform: uppercase; letter-spacing: .08em; display: flex; align-items: center; justify-content: space-between; font-family: var(--font-mono); }
    .runtime-block__value-row { display: flex; align-items: center; gap: 8px; flex-wrap: wrap; }
    select.model-select { appearance: none; background-color: var(--bg-app); color: var(--text-primary); border: 1px solid var(--border-color); border-radius: var(--radius-sm); font-size: 11px; font-family: var(--font-mono); padding: 6px 8px; line-height: 1.2; min-width: 150px; cursor: pointer; }
    .status-pill { display: inline-flex; align-items: center; border-radius: var(--radius-sm); border: 1px solid var(--border-color); background-color: var(--bg-alt); font-family: var(--font-mono); font-weight: 500; font-size: 10px; line-height: 1.1; padding: 4px 6px; gap: 4px; text-transform: uppercase; white-space: nowrap; }
    .status-pill[data-state="idle"] { color: var(--text-dim); opacity: 0.8; }
    .status-pill[data-state="running"] { color: var(--text-primary); }
    main.app-main { display: grid; grid-template-columns: 320px 1fr 360px; gap: 16px; padding: 16px; min-height: 0; overflow: hidden; }
    .panel-group { display: flex; flex-direction: column; gap: 16px; min-height: 0; overflow: hidden; }
    .panel { background-color: var(--bg-panel); border: 1px solid var(--border-color); border-radius: var(--radius-lg); box-shadow: var(--panel-shadow); display: flex; flex-direction: column; min-height: 0; position: relative; }
    .panel__header { padding: var(--pad-md) var(--pad-lg) var(--pad-sm) var(--pad-lg); border-bottom: 1px solid var(--border-color); display: flex; flex-wrap: wrap; align-items: flex-start; justify-content: space-between; gap: 8px; }
    .panel__titleblock { min-width: 0; }
    .panel__title-row { display: flex; align-items: baseline; gap: 8px; flex-wrap: wrap; }
    .panel__title { font-size: 11px; line-height: 1.2; font-weight: 600; letter-spacing: -0.04em; color: var(--text-primary); display: flex; align-items: center; gap: 6px; }
    .panel__title-code { font-family: var(--font-mono); font-size: 10px; line-height: 1.2; font-weight: 500; color: var(--text-dim); background-color: var(--bg-app); border: 1px solid var(--border-color); border-radius: var(--radius-sm); padding: 2px 4px; }
    .panel__meta { font-size: 10px; font-weight: 400; line-height: 1.3; color: var(--text-dim); letter-spacing: -0.03em; font-family: var(--font-mono); word-break: break-word; }
    .panel__actions { display: flex; flex-wrap: wrap; gap: 8px; align-items: flex-start; margin-left: auto; }
    .ghost-btn { background-color: var(--bg-app); color: var(--text-primary); border: 1px solid var(--border-color); border-radius: var(--radius-sm); font-size: 10px; line-height: 1.2; font-weight: 500; font-family: var(--font-mono); padding: 6px 8px; cursor: pointer; text-transform: uppercase; letter-spacing: .06em; min-height: 28px; }
    .ghost-btn[disabled] { opacity: 0.4; cursor: not-allowed; }
    .panel__body { padding: var(--pad-md) var(--pad-lg) var(--pad-lg) var(--pad-lg); display: flex; flex-direction: column; gap: 12px; min-height: 0; overflow: hidden; }
    .panel__body.scrollable { overflow-y: auto; }
    .field-group { display: flex; flex-direction: column; gap: 4px; min-width: 0; }
    .field-label-row { display: flex; align-items: baseline; justify-content: space-between; flex-wrap: wrap; gap: 6px; min-width: 0; }
    .field-label { font-size: 10px; line-height: 1.2; font-weight: 500; color: var(--text-primary); font-family: var(--font-mono); letter-spacing: -0.03em; max-width: 75%; white-space: nowrap; text-overflow: ellipsis; overflow: hidden; }
    .field-hint { font-size: 10px; line-height: 1.2; font-weight: 400; color: var(--text-dim); font-family: var(--font-mono); letter-spacing: -0.03em; max-width: 100%; word-break: break-word; }
    .text-input,.select-input,.textarea-input { width: 100%; background-color: var(--bg-app); color: var(--text-primary); border: 1px solid var(--border-color); border-radius: var(--radius-sm); font-family: var(--font-mono); font-size: 11px; font-weight: 400; line-height: 1.4; min-height: 32px; padding: 8px 10px; resize: none; }
    .textarea-input { min-height: 72px; line-height: 1.4; resize: vertical; }
    .inline-row { display: flex; flex-wrap: wrap; align-items: flex-start; gap: 8px; width: 100%; }
    .keys-grid { display: grid; grid-template-columns: 1fr; gap: 8px; }
    .key-row { background-color: var(--bg-app); border: 1px solid var(--border-color); border-radius: var(--radius-md); padding: 8px 10px; display: grid; grid-template-columns: minmax(0,1fr) auto; row-gap: 8px; column-gap: 12px; font-family: var(--font-mono); }
    .key-row__topline { display: flex; flex-wrap: wrap; align-items: baseline; gap: 8px; min-width: 0; }
    .key-row__id { font-size: 10px; line-height: 1.2; font-weight: 500; color: var(--text-primary); white-space: nowrap; }
    .key-row__fieldwrap { min-width: 0; flex: 1; width: 100%; }
    .key-input { width: 100%; background-color: var(--bg-panel); border: 1px solid var(--border-color); border-radius: var(--radius-sm); color: var(--text-primary); font-family: var(--font-mono); font-size: 11px; line-height: 1.3; padding: 6px 8px; min-height: 30px; }
    .key-row__stats { display: grid; grid-template-columns: repeat(3,auto); gap: 8px 12px; align-items: start; justify-content: start; font-family: var(--font-mono); font-size: 10px; line-height: 1.3; color: var(--text-dim); }
    .stat-block { display: flex; flex-direction: column; min-width: 0; }
    .stat-label { font-size: 9px; line-height: 1.2; font-weight: 500; text-transform: uppercase; letter-spacing: .08em; color: var(--text-extra-dim); white-space: nowrap; }
    .stat-value { color: var(--text-primary); font-size: 10px; line-height: 1.2; font-weight: 500; word-break: break-word; }
    .cooldown-timer { font-variant-numeric: tabular-nums; }
    .list-block { background-color: var(--bg-app); border: 1px solid var(--border-color); border-radius: var(--radius-md); overflow: hidden; min-height: 80px; max-height: 200px; display: flex; flex-direction: column; }
    .list-block__head { display: grid; grid-template-columns: minmax(0,1fr) auto; gap: 8px 12px; padding: 8px 10px; border-bottom: 1px solid var(--border-color); }
    .list-block__titlecol { min-width: 0; }
    .list-heading { font-size: 10px; line-height: 1.2; font-weight: 500; color: var(--text-primary); display: flex; flex-wrap: wrap; align-items: baseline; gap: 6px; letter-spacing: -0.03em; font-family: var(--font-mono); }
    .list-heading .muted { font-size: 10px; line-height: 1.2; font-weight: 400; color: var(--text-dim); }
    .list-block__body { min-height: 0; overflow-y: auto; font-family: var(--font-mono); font-size: 10px; line-height: 1.4; color: var(--text-primary); }
    .list-item { border-bottom: 1px solid var(--border-color-soft); padding: 8px 10px; display: grid; grid-template-columns: minmax(0,1fr) auto; gap: 8px 12px; }
    .list-item:last-child { border-bottom: 0; }
    .list-item__main { min-width: 0; }
    .list-item__heading { display: flex; flex-wrap: wrap; gap: 6px; align-items: baseline; min-width: 0; }
    .item-heading-text { font-weight: 500; color: var(--text-primary); font-size: 10px; line-height: 1.3; letter-spacing: -0.03em; white-space: nowrap; text-overflow: ellipsis; overflow: hidden; max-width: 100%; }
    .item-id { font-size: 9px; line-height: 1.2; color: var(--text-dim); background-color: var(--bg-panel); border: 1px solid var(--border-color); border-radius: var(--radius-sm); padding: 2px 4px; max-width: 100%; text-overflow: ellipsis; overflow: hidden; white-space: nowrap; }
    .item-content { color: var(--text-dim); font-size: 10px; line-height: 1.4; margin-top: 4px; word-break: break-word; letter-spacing: -0.03em; }
    .list-item__meta { text-align: right; min-width: 0; display: flex; flex-direction: column; align-items: flex-end; gap: 4px; }
    .timestamp { color: var(--text-extra-dim); font-size: 9px; line-height: 1.2; font-weight: 400; letter-spacing: -0.03em; white-space: nowrap; font-variant-numeric: tabular-nums; }
    .task-status-pill { display: inline-flex; border-radius: var(--radius-sm); border: 1px solid var(--border-color); background-color: var(--bg-panel); color: var(--text-primary); font-size: 9px; line-height: 1.2; font-weight: 500; font-family: var(--font-mono); padding: 2px 4px; text-transform: uppercase; letter-spacing: .08em; white-space: nowrap; }
    .console-block { background-color: var(--bg-app); border: 1px solid var(--border-color); border-radius: var(--radius-md); min-height: 120px; max-height: 200px; display: flex; flex-direction: column; overflow: hidden; }
    .console-head { display: flex; align-items: center; justify-content: space-between; flex-wrap: wrap; padding: 8px 10px; border-bottom: 1px solid var(--border-color); gap: 8px; }
    .console-head__title { display: flex; flex-wrap: wrap; gap: 8px; align-items: baseline; min-width: 0; }
    .console-label { font-size: 10px; line-height: 1.2; font-weight: 500; color: var(--text-primary); font-family: var(--font-mono); letter-spacing: -0.03em; }
    .console-sub { font-size: 9px; line-height: 1.2; color: var(--text-dim); font-family: var(--font-mono); letter-spacing: -0.03em; }
    .console-body { flex: 1; min-height: 0; overflow-y: auto; padding: 10px; font-family: var(--font-mono); font-size: 10px; line-height: 1.4; color: var(--text-primary); white-space: pre-wrap; word-break: break-word; }
    .code-block-wrap { background-color: var(--bg-app); border: 1px solid var(--border-color); border-radius: var(--radius-md); display: flex; flex-direction: column; min-height: 160px; max-height: 220px; overflow: hidden; }
    .code-head { padding: 8px 10px; border-bottom: 1px solid var(--border-color); display: flex; flex-wrap: wrap; align-items: center; justify-content: space-between; gap: 8px; }
    .code-head-left { display: flex; flex-wrap: wrap; align-items: baseline; gap: 8px; min-width: 0; }
    .code-title { font-size: 10px; line-height: 1.2; font-weight: 500; color: var(--text-primary); font-family: var(--font-mono); letter-spacing: -0.03em; }
    .code-env-pill { border-radius: var(--radius-sm); border: 1px solid var(--border-color); background-color: var(--bg-panel); font-size: 9px; line-height: 1.2; font-family: var(--font-mono); font-weight: 500; padding: 2px 4px; color: var(--text-dim); text-transform: uppercase; letter-spacing: .08em; white-space: nowrap; }
    .code-head-right { display: flex; flex-wrap: wrap; gap: 8px; }
    .code-body { display: grid; grid-template-rows: 1fr auto; min-height: 0; flex: 1; }
    .code-editor-area { min-height: 0; overflow: hidden; border-bottom: 1px solid var(--border-color); }
    .code-textarea { width: 100%; height: 100%; min-height: 100px; max-height: 140px; background-color: transparent; border: 0; color: var(--text-primary); font-family: var(--font-mono); font-size: 11px; line-height: 1.4; padding: 10px; resize: none; outline: none; white-space: pre; overflow: auto; }
    .exec-output-area { min-height: 60px; max-height: 80px; overflow-y: auto; font-family: var(--font-mono); font-size: 10px; line-height: 1.4; color: var(--text-primary); padding: 10px; background-color: var(--bg-panel); }
    .final-output-block { background-color: var(--bg-app); border: 1px solid var(--border-color); border-radius: var(--radius-md); min-height: 120px; max-height: 200px; overflow: hidden; display: flex; flex-direction: column; }
    .final-head { border-bottom: 1px solid var(--border-color); padding: 8px 10px; display: flex; flex-wrap: wrap; justify-content: space-between; align-items: baseline; gap: 8px; }
    .final-head-left { min-width: 0; }
    .final-title { font-size: 10px; line-height: 1.2; font-weight: 500; color: var(--text-primary); font-family: var(--font-mono); letter-spacing: -0.03em; display: flex; flex-wrap: wrap; align-items: baseline; gap: 8px; }
    .goal-check-pill { border-radius: var(--radius-sm); border: 1px solid var(--border-color); background-color: var(--bg-panel); font-size: 9px; line-height: 1.2; font-family: var(--font-mono); font-weight: 500; padding: 2px 4px; color: var(--text-dim); text-transform: uppercase; letter-spacing: .08em; white-space: nowrap; }
    .final-body { flex: 1; min-height: 0; overflow-y: auto; padding: 10px; font-family: var(--font-sans); font-size: 12px; line-height: 1.5; color: var(--text-primary); letter-spacing: -0.03em; }
    @media (max-width: 1200px) { main.app-main { grid-template-columns: 300px 1fr; } .col-right { display: none; } }
    @media (max-width: 800px) { main.app-main { grid-template-columns: 1fr; } .col-left,.col-right { order: 2; } .col-center { order: 1; } }
  </style>
</head>
<body>
  <header class="app-header">
    <div class="app-header__left">
      <div class="app-title">
        <div>GEMINI DEEP RESEARCH SYSTEM</div>
        <div class="app-title__label">UNRESTRICTED REASONING LOOP</div>
        <div class="app-title__label">LOCAL FIRST</div>
        <div class="app-title__label">NO SANDBOX</div>
      </div>
      <div class="app-subline">Iterative analysis • Unlimited code execution • Persistent task/memory/goal state • Data Vault substitution</div>
    </div>
    <div class="app-header__right">
      <div class="runtime-block">
        <div class="runtime-block__label"><span>MODEL</span><span class="status-pill" data-state="idle" data-session-status><span aria-hidden="true">●</span><span>IDLE</span></span></div>
        <div class="runtime-block__value-row">
          <select class="model-select" id="modelSelect" data-model-select>
            <option value="">-- select model --</option>
          </select>
        </div>
      </div>
      <div class="runtime-block">
        <div class="runtime-block__label"><span>KEY ROTATION</span><span class="status-pill" data-state="idle" data-key-rotation-status><span aria-hidden="true">↻</span><span>NEXT: #2</span></span></div>
        <div class="runtime-block__value-row"><div class="field-hint" style="font-size:10px;line-height:1.3;">auto-failover on rate limit / cooldown tracked in real time</div></div>
      </div>
    </div>
  </header>
  <main class="app-main">
    <section class="panel-group col-left">
      <section class="panel" id="panel_apiKeys">
        <header class="panel__header">
          <div class="panel__titleblock">
            <div class="panel__title-row"><div class="panel__title"><span>API KEYS</span><span class="panel__title-code">gemini / failover / cooldown</span></div></div>
            <div class="panel__meta">5-key pool. Automatic sequential rotation when rate limits hit. Local only.</div>
          </div>
          <div class="panel__actions"><button class="ghost-btn" data-action="validate-keys">validate</button><button class="ghost-btn" data-action="clear-keys">clear</button></div>
        </header>
        <div class="panel__body">
          <div class="keys-grid" data-keys-wrapper>
            <!-- five key rows -->
            