<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <title>Gemini Chat — Memory · Reasoning · Goals · Tools</title>
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <!-- Fonts: Geist Sans & Geist Mono via Fontsource CDN -->
  <!-- Sans -->
  <link rel="preconnect" href="https://cdn.jsdelivr.net" crossorigin>
  <style>
  /* geist-latin-wght-normal */
  @font-face {
    font-family: 'Geist Variable';
    font-style: normal;
    font-display: swap;
    font-weight: 100 900;
    src: url(https://cdn.jsdelivr.net/fontsource/fonts/geist:vf@latest/latin-wght-normal.woff2) format('woff2-variations');
    unicode-range: U+0000-00FF,U+0131,U+0152-0153,U+02BB-02BC,U+02C6,U+02DA,U+02DC,U+0304,U+0308,U+0329,U+2000-206F,U+20AC,U+2122,U+2191,U+2193,U+2212,U+2215,U+FEFF,U+FFFD;
  }
  /* Mono */
  @font-face {
    font-family: 'Geist Mono Variable';
    font-style: normal;
    font-display: swap;
    font-weight: 100 900;
    src: url(https://cdn.jsdelivr.net/fontsource/fonts/geist-mono:vf@latest/latin-wght-normal.woff2) format('woff2-variations');
    unicode-range: U+0000-00FF,U+0131,U+0152-0153,U+02BB-02BC,U+02C6,U+02DA,U+02DC,U+0304,U+0308,U+0329,U+2000-206F,U+20AC,U+2122,U+2191,U+2193,U+2212,U+2215,U+FEFF,U+FFFD;
  }
  </style>
  <link rel="stylesheet" href="styles.css" />
</head>
<body>
  <header class="topbar">
    <div class="brand">Gemini Chat</div>
    <div class="spacer"></div>
    <div class="controls">
      <label class="switch">
        <input id="execToggle" type="checkbox" />
        <span class="slider"></span>
        <span class="switch-label">Enable Code Execution</span>
      </label>
      <div class="divider"></div>
      <select id="modelSelect" title="Model">
        <option value="gemini-2.5-flash">gemini-2.5-flash</option>
        <option value="gemini-2.5-pro">gemini-2.5-pro</option>
        <option value="gemini-2.0-flash">gemini-2.0-flash</option>
        <option value="gemini-2.5-flash-lite">gemini-2.5-flash-lite</option>
      </select>
      <input id="temperature" type="number" step="0.1" min="0" max="2" value="0.6" title="Temperature" />
      <button id="clearBtn" class="ghost">New</button>
      <button id="exportBtn" class="ghost">Export</button>
      <button id="importBtn" class="ghost">Import</button>
      <input id="importFile" type="file" accept="application/json" hidden />
      <button id="keyBtn" class="primary">API Keys</button>
    </div>
  </header>

  <main class="layout">
    <aside class="left">
      <section class="panel">
        <h2>Goals</h2>
        <div id="goalsList" class="list"></div>
        <div class="goal-form">
          <input id="goalInput" placeholder="Add a goal…" />
          <button id="addGoalBtn" class="ghost">Add</button>
        </div>
      </section>

      <section class="panel">
        <h2>Memory</h2>
        <div id="memoryList" class="list"></div>
        <div class="memory-form">
          <input id="memSummaryInput" placeholder="Summary key…" />
          <textarea id="memValueInput" rows="3" placeholder="Detailed value to store…"></textarea>
          <button id="addMemoryBtn" class="ghost">Store</button>
        </div>
      </section>

      <section class="panel">
        <h2>Immediate Reasoning Chain</h2>
        <ol id="chainList" class="chain"></ol>
      </section>

      <section class="panel">
        <h2>Tool Log</h2>
        <div id="toolLog" class="tool-log"></div>
      </section>
    </aside>

    <section class="center">
      <div id="chat" class="chat"></div>
      <form id="composer" class="composer">
        <textarea id="prompt" rows="2" placeholder="Ask anything. Shift+Enter for newline."></textarea>
        <div class="composer-actions">
          <button id="stopBtn" class="ghost" type="button" disabled>Stop</button>
          <button id="sendBtn" class="primary" type="submit">Send</button>
        </div>
      </form>
    </section>

    <aside class="right">
      <section class="panel">
        <h2>Canvas (HTML)</h2>
        <iframe id="canvas" title="Canvas Preview" class="canvas"></iframe>
        <div class="canvas-actions">
          <button id="canvasDownloadBtn" class="ghost">Download .html</button>
          <button id="canvasClearBtn" class="ghost">Clear</button>
        </div>
      </section>

      <section class="panel">
        <h2>JS Outputs</h2>
        <div id="jsOutputs" class="list monospace"></div>
      </section>
    </aside>
  </main>

  <!-- Modal: API Keys -->
  <dialog id="keysDialog" class="modal">
    <form method="dialog" class="keys-form">
      <h3>API Keys (Gemini, 5‑key ring)</h3>
      <p class="muted">Stored locally in your browser (localStorage). Keys rotate automatically on 429/quota.</p>
      <div class="keys-grid">
        <label>Key 1 <input type="password" id="key1" autocomplete="off"></label>
        <label>Key 2 <input type="password" id="key2" autocomplete="off"></label>
        <label>Key 3 <input type="password" id="key3" autocomplete="off"></label>
        <label>Key 4 <input type="password" id="key4" autocomplete="off"></label>
        <label>Key 5 <input type="password" id="key5" autocomplete="off"></label>
      </div>
      <div class="keys-actions">
        <button id="saveKeysBtn" class="primary" value="default">Save</button>
        <button id="wipeKeysBtn" class="ghost" value="default">Wipe</button>
        <button id="closeKeysBtn" class="ghost" value="cancel">Close</button>
      </div>
    </form>
  </dialog>

  <noscript>
    <div class="noscript">JavaScript is required.</div>
  </noscript>

  <script type="module" src="app.js"></script>
</body>
</html>